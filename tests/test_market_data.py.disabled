#!/usr/bin/env python3
"""
Prueba rÃ¡pida de obtenciÃ³n de datos de mercado
"""

from trading_live.crypto_live_engine import CryptoLiveTradingEngine
from dotenv import load_dotenv
import logging

# Configurar logging bÃ¡sico
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')

if __name__ == "__main__":
    load_dotenv()

    # Crear engine
    engine = CryptoLiveTradingEngine(symbols=['BTC/USD', 'ETH/USD'])

    print("ğŸ§ª PRUEBA DE OBTENCIÃ“N DE DATOS DE MERCADO")
    print("=" * 50)

    # Probar obtener datos para cada sÃ­mbolo
    for symbol in ['BTC/USD', 'ETH/USD', 'SOL/USD', 'XRP/USD']:
        print(f"\nğŸª™ Probando {symbol}:")
        try:
            market_data = engine.get_market_data(symbol)
            if market_data:
                print("   âœ… DATOS OBTENIDOS")
                close_price = market_data.get('close', 'N/A')
                rsi = market_data.get('RSI_14', 'N/A')
                sma = market_data.get('SMA_20', 'N/A')

                if isinstance(close_price, (int, float)):
                    print(f"   ğŸ’° Precio: ${close_price:.2f}")
                else:
                    print(f"   ğŸ’° Precio: {close_price}")

                print(f"   ğŸ“Š RSI: {rsi}")
                print(f"   ğŸ“ˆ SMA20: {sma}")
            else:
                print("   âŒ SIN DATOS")
        except Exception as e:
            print(f"   âŒ ERROR: {e}")

    print("\nğŸ¯ PRUEBA COMPLETADA")